<div id="main-content">
  <%= form_for @article, html: { multipart: true } do |f| %>

  <div class="form-group">
      
      <%= f.label :title %>
      <%= f.text_field :title, class: "form-control" %>
      <%= @article.errors[:title].first unless @article.errors[:title].blank? %>
    <br>

      <%= f.label :content %>
      <%= f.text_area :content,  cols: 20, rows: 10, class: "form-control" %>
      <%= @article.errors[:content].first unless @article.errors[:content].blank? %>
    <!-- <br>
    <div>
      
      </div> -->
      <br>
      <div class="up-image">
      <%= image_tag @article.image.url, :size => "100x100" %>
    </div>  
      <%= f.file_field :image %>
      <%= @article.errors[:image].first unless @article.errors[:image].blank? %>
    <br>
      <%= f.submit :submit, class: "btn btn-default" %>
    
  </div>
</div>
<% end %>
<script>
  $(document).ready(function(){
    var preview = $(".up-image img");

    $("#article_image").change(function(event){
       var input = $(event.currentTarget);
       var image = input[0].files[0];
       var reader = new FileReader();
       reader.onload = function(e){
           image_base64 = e.target.result;
           preview.attr("src", image_base64);
       };
       reader.readAsDataURL(image);
    });
});
</script>
